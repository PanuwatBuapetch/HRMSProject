@page "/"
@using ChartJs.Blazor
@namespace HrmsApp.Pages

<PageTitle>Dashboard - HRMS</PageTitle>

<div class="container-fluid py-3 bg-light min-vh-100">
    <div class="mb-4">
        <h4 class="fw-bold text-dark"><i class="bi bi-speedometer2 me-2"></i>Dashboard สรุปภาพรวม</h4>
    </div>

    @if (IsLoading)
    {
        <div class="text-center py-5">
            <div class="spinner-border text-primary" role="status"></div>
        </div>
    }
    else
    {
        @* --- ส่วนของ Card สรุป (ปรับให้เล็กลงและเรียง 4 คอลัมน์) --- *@
        <div class="row g-3 mb-4">
            <div class="col-6 col-md-3">
                <div class="card border-0 shadow-sm rounded-3 p-3 bg-white border-start border-primary border-4">
                    <div class="text-muted small fw-bold">พนักงาน (STAFF)</div>
                    <div class="h4 fw-bold mb-0">@staffdetails?.Count <small class="text-muted fs-6">คน</small></div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card border-0 shadow-sm rounded-3 p-3 bg-white border-start border-danger border-4">
                    <div class="text-muted small fw-bold">ผู้บริหาร (MGT)</div>
                    <div class="h4 fw-bold mb-0">@Managements?.Count <small class="text-muted fs-6">คน</small></div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card border-0 shadow-sm rounded-3 p-3 bg-white border-start border-success border-4">
                    <div class="text-muted small fw-bold">แผนก (DEPT)</div>
                    <div class="h4 fw-bold mb-0">@departments?.Count <small class="text-muted fs-6">แห่ง</small></div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card border-0 shadow-sm rounded-3 p-3 bg-white border-start border-warning border-4">
                    <div class="text-muted small fw-bold">ตำแหน่ง (POS)</div>
                    <div class="h4 fw-bold mb-0">@PositionsCount <small class="text-muted fs-6">ตำแหน่ง</small></div>
                </div>
            </div>
        </div>

        @* --- ส่วนของกราฟ (แบ่ง 2 คอลัมน์ 7:5 เพื่อไม่ให้ใหญ่เกินไป) --- *@
        <div class="row g-4">
            <div class="col-lg-7">
                <div class="card border-0 shadow-sm rounded-3 p-3 h-100">
                    <h6 class="fw-bold mb-3"><i class="bi bi-bar-chart-line me-2"></i>พนักงานแยกตามแผนก</h6>
                    <div style="height: 300px;">
                        <Chart Config="_barConfig"></Chart>
                    </div>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="card border-0 shadow-sm rounded-3 p-3 h-100">
                    <h6 class="fw-bold mb-3"><i class="bi bi-pie-chart me-2"></i>สัดส่วนสถานะพนักงาน</h6>
                    <div style="height: 300px;">
                        <Chart Config="_statusPieConfig"></Chart>
                    </div>
                </div>
            </div>
        </div>
    }
</div>